<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Statistiky | PojistiToSnadno</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Pozadí -->
  <img src="portret-bg-web.png" alt="" class="bg-img-desktop">
  <img src="portret.png" alt="" class="bg-img-mobile">

  <!-- Menu -->
  <nav class="top-nav">
    <img src="portret.png" alt="Daniel Verner" class="portrait-desktop" />
    <a href="index.html#domu">Domů</a>
    <a href="clanky.html">Články</a>
    <a href="slovnik.html">Slovník</a>
    <a href="statistiky.html" class="active">Statistiky</a>
    <a href="kontakt.html">Kontakt</a>
  </nav>

  <main class="container">
    <style>
  .pojisteni-grafy-box { display:flex; flex-wrap:wrap; justify-content:center; gap:2em; }
  .graf-karta { max-width:340px; background:#f6f4ee; border-radius:18px; box-shadow:0 2px 12px rgba(120,100,60,0.11); padding:2em 1em; margin:1em 0; }
  .graf-karta canvas { display:block; margin:0 auto; }
  .graf-vysvetlivka { min-height:2.2em; margin-top:1em; color:#474336; font-size:1.08em; background:#fffbe7; padding:0.6em 0.8em; border-radius:12px; }
  .graf-karta b { display:block; margin-bottom:0.5em; font-size:1.09em;}
</style>

<div class="pojisteni-grafy-box">

  <!-- Životní pojištění -->
  <div class="graf-karta">
    <b>Životní pojištění</b>
    <canvas id="zivot" width="260" height="260"></canvas>
    <div id="vysvetlivka-zivot" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>

  <!-- Pojištění majetku -->
  <div class="graf-karta">
    <b>Pojištění majetku</b>
    <canvas id="majetek" width="260" height="260"></canvas>
    <div id="vysvetlivka-majetek" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>

  <!-- Pojištění vozidel -->
  <div class="graf-karta">
    <b>Pojištění vozidel</b>
    <canvas id="vozidlo" width="260" height="260"></canvas>
    <div id="vysvetlivka-vozidlo" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>

  <!-- Úrazové pojištění -->
  <div class="graf-karta">
    <b>Úrazové pojištění</b>
    <canvas id="uraz" width="260" height="260"></canvas>
    <div id="vysvetlivka-uraz" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>

  <!-- Pracovní neschopnost -->
  <div class="graf-karta">
    <b>Pracovní neschopnost</b>
    <canvas id="pn" width="260" height="260"></canvas>
    <div id="vysvetlivka-pn" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>

  <!-- Cestovní pojištění -->
  <div class="graf-karta">
    <b>Cestovní pojištění</b>
    <canvas id="cestovni" width="260" height="260"></canvas>
    <div id="vysvetlivka-cestovni" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>

  <!-- Pojištění odpovědnosti -->
  <div class="graf-karta">
    <b>Pojištění odpovědnosti</b>
    <canvas id="odpovednost" width="260" height="260"></canvas>
    <div id="vysvetlivka-odpovednost" class="graf-vysvetlivka">Kliknutím na výseč zobrazíte podrobnosti.</div>
  </div>
</div>


    <!-- 1. Chart.js knihovna -->

    <script>
const grafy = [
  {
    id: 'zivot',
    vysvetlivka: 'vysvetlivka-zivot',
    labels: ['Nemoci','Úrazy','Pracovní neschopnost','Úrazy při dopravní nehodě'],
    data: [48,22,18,12],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Nemoci – Nejčastější důvod plnění z životního pojištění. Patří sem např. rakovina, infarkt, dlouhodobá onemocnění.",
      "Úrazy – Výplata při dlouhodobých následcích úrazů (např. trvalé následky, závažné úrazy).",
      "Pracovní neschopnost – Pojištění výpadku příjmů při dlouhodobé nemoci nebo úrazu.",
      "Úrazy při dopravní nehodě – Plnění za zranění při autonehodách a dalších dopravních událostech."
    ]
  },
  {
    id: 'majetek',
    vysvetlivka: 'vysvetlivka-majetek',
    labels: ['Počasí','Krádež/vloupání','Požár','Havárie'],
    data: [55,22,13,10],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Poškození počasím – Bouřky, krupobití, záplavy a vichřice tvoří největší část škod.",
      "Krádež nebo vloupání – Zahrnuje škody vzniklé krádeží nebo vniknutím cizí osoby.",
      "Požár – Škody způsobené požárem nebo výbuchem.",
      "Havárie – Prasklé potrubí, zatečení, technické poruchy."
    ]
  },
  {
    id: 'vozidlo',
    vysvetlivka: 'vysvetlivka-vozidlo',
    labels: ['Dopravní nehoda','Střet se zvěří','Vandalismus','Krádež'],
    data: [68,15,10,7],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Dopravní nehoda – Nejčastější pojistné události, zahrnuje střety vozidel, škody na zdraví i majetku.",
      "Střet se zvěří – Typicky sraz srny, divočáka apod., hlavně mimo města.",
      "Vandalismus – Úmyslné poškození vozidla třetí osobou.",
      "Krádež – Odcizení vozidla nebo jeho částí."
    ]
  },
  {
    id: 'uraz',
    vysvetlivka: 'vysvetlivka-uraz',
    labels: ['Pády','Sportovní úrazy','Pracovní úrazy','Dopravní nehody'],
    data: [40,32,18,10],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Pády v domácnosti – Kluzké podlahy, schody a podobné situace.",
      "Sportovní úrazy – Úrazy při rekreačním nebo závodním sportu.",
      "Pracovní úrazy – Zranění během výkonu povolání.",
      "Dopravní nehody – Zahrnuje úrazy při dopravních nehodách mimo pracovní dobu."
    ]
  },
  {
    id: 'pn',
    vysvetlivka: 'vysvetlivka-pn',
    labels: ['Nemoc','Úraz','Psychika','Ostatní'],
    data: [58,25,12,5],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Nemoc – Většina dlouhodobých pracovních neschopností vzniká kvůli běžným i vážnějším nemocem.",
      "Úraz – Zlomeniny, výrony, a další tělesná zranění mimo práci.",
      "Psychické potíže – Vyhoření, deprese, dlouhodobý stres.",
      "Ostatní – Například karanténa nebo jiné méně časté příčiny."
    ]
  },
  {
    id: 'cestovni',
    vysvetlivka: 'vysvetlivka-cestovni',
    labels: ['Nemoc','Úraz','Krádež','Storno zájezdu'],
    data: [41,28,19,12],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Nemoc v zahraničí – Nejčastější pojistné události, včetně hospitalizace.",
      "Úraz v zahraničí – Zlomeniny, řezné rány, nebo komplikace při sportu.",
      "Krádež věcí – Odcizení zavazadel, mobilů apod.",
      "Storno zájezdu – Náhlé zrušení dovolené (nemoc, úmrtí v rodině...)."
    ]
  },
  {
    id: 'odpovednost',
    vysvetlivka: 'vysvetlivka-odpovednost',
    labels: ['Škoda na majetku','Škoda na zdraví','Zvíře','Zaměstnání'],
    data: [48,27,16,9],
    barvy: ['#b7a97c','#e2dbc9','#c1cfc2','#a6b89a'],
    vysvetlivky: [
      "Škoda na majetku – Poškození nebo ztráta cizí věci (např. rozbité okno souseda).",
      "Škoda na zdraví – Poranění jiné osoby (např. cyklista srazí chodce).",
      "Škoda způsobená zvířetem – Pes roztrhne kalhoty sousedovi apod.",
      "Škoda v zaměstnání – Způsobená zaměstnavateli při výkonu práce."
    ]
  },
];

// Pro každý graf vlastní scope – IIFE
grafy.forEach(function(graf) {
  (function(graf) {
    const ctx = document.getElementById(graf.id).getContext('2d');
    const vysvetlivkaDiv = document.getElementById(graf.vysvetlivka);

    // Inicializace grafu
    const pie = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: graf.labels,
        datasets: [{
          data: graf.data,
          backgroundColor: graf.barvy
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display:true, position:'bottom' },
          tooltip: { enabled: false }
        }
      }
    });

    // Kliknutí na výseč = zobraz vysvětlivku
    ctx.canvas.addEventListener('click', function(evt) {
      const points = pie.getElementsAtEventForMode(evt, 'nearest', { intersect: true }, false);
      if (points.length) {
        const idx = points[0].index;
        vysvetlivkaDiv.innerHTML = graf.vysvetlivky[idx];
      }
    });

    // První načtení = defaultní text
    vysvetlivkaDiv.innerHTML = "Kliknutím na výseč zobrazíte podrobnosti.";
  })(graf); // <- Tady je uzavřená scope
});
</script>



</body>
</html>
