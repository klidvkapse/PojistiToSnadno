<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Poslední šance – Soutěž | PojistiToSnadno.cz</title>
  <meta name="description" content="Živý odpočet do konce soutěže. Soutěž končí zítra přesně ve 12:00. Losování proběhne kolem 18:30. Sledujte PojistiToSnadno.cz." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
    body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(160deg,#ff8a5c,#ff6a3d);color:#111;padding:20px}
    .card{background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.25);padding:24px;max-width:700px;width:100%}
    h1{margin:0 0 10px;font-size:clamp(28px,5vw,42px)}
    .sub{margin:0 0 20px;color:#333;font-size:clamp(16px,2.4vw,18px)}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin:8px 0 16px}
    .unit{background:#111;color:#fff;border-radius:16px;padding:16px;text-align:center}
    .value{font-size:clamp(28px,8vw,56px);font-weight:800}
    .label{opacity:.8;font-size:13px;text-transform:uppercase;margin-top:6px}
    .deadline{margin-top:10px;font-size:14px;color:#444}
    .meta{display:flex;gap:10px;flex-wrap:wrap;margin:16px 0;color:#222}
    .pill{background:#ffe5d6;border:1px solid #ffd0bb;border-radius:999px;padding:8px 12px;font-weight:600;font-size:14px}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px;justify-content:center}
    .btn{appearance:none;border:0;cursor:pointer;border-radius:12px;padding:14px 18px;font-weight:700;font-size:16px;text-decoration:none;display:inline-block;text-align:center;min-width:200px}
    .btn-back{background:#111;color:#fff}.btn-primary{background:#111;color:#fff}.btn-secondary{background:#fff;color:#111;border:1px solid #1112}
    .btn-fb{background:#4267B2;color:#fff}
    footer{margin-top:14px;font-size:12px;color:#333;text-align:center}
    @media(max-width:640px){.grid{grid-template-columns:repeat(2,1fr)}}
    .done{display:none}
    .done.show{display:block}
  </style>
</head>
<body>
  <main class="card" aria-live="polite">
    <h1 id="title">Poslední šance – soutěž končí</h1>
    <p class="sub" id="subtitle">Živý odpočet do uzávěrky. Losování proběhne dne 16.9.2025 v 18:30.</p>

    <div class="grid" role="group" aria-label="Odpočet do konce soutěže">
      <div class="unit"><div class="value" id="d">0</div><div class="label">Dny</div></div>
      <div class="unit"><div class="value" id="h">00</div><div class="label">Hodiny</div></div>
      <div class="unit"><div class="value" id="m">00</div><div class="label">Minuty</div></div>
      <div class="unit"><div class="value" id="s">00</div><div class="label">Sekundy</div></div>
    </div>

    <div class="deadline" id="deadlineTxt"></div>

    <div class="meta">
      <span class="pill">Losování cca 18:30</span>
      <span class="pill">Průběžně aktualizováno</span>
    </div>

    <div class="cta">
      <button class="btn btn-back" id="goBack" aria-label="Zpět na předchozí stránku">⬅️ Zpět</button>
      <a class="btn btn-primary" id="goFB" href="https://www.facebook.com/photo?fbid=122102525150980405&set=a.122113635866980405&locale=cs_CZ" target="_blank" rel="noopener" aria-label="Otevřít soutěžní příspěvek na Facebooku">Chci se zúčastnit</a>
    </div>

    <div class="done" id="done">
      <h2>Soutěž byla uzavřena</h2>
      <p>Děkujeme všem za účast! Sledujte naši Facebook stránku, kde brzy zveřejníme vítěze a další soutěže.</p>
    </div>

    <footer>&copy; 2025 PojistiToSnadno.cz</footer>
  </main>

  <script>
    const qs = new URLSearchParams(location.search);
    const deadlineParam = qs.get('deadline');
    function defaultDeadlineTomorrowNoon(){
      const now=new Date();
      const d=new Date(now);
      d.setDate(now.getDate()+1);
      d.setHours(12,0,0,0);
      return d;
    }
    const target=deadlineParam?new Date(deadlineParam):defaultDeadlineTomorrowNoon();
    const fmt=new Intl.DateTimeFormat(undefined,{weekday:'long',day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'});
    document.getElementById('deadlineTxt').textContent=`Uzávěrka: ${fmt.format(target)} (místní čas)`;
    const el={d:document.getElementById('d'),h:document.getElementById('h'),m:document.getElementById('m'),s:document.getElementById('s'),done:document.getElementById('done')};
    function pad(n){return n.toString().padStart(2,'0');}
    function tick(){
      const now=new Date();
      const diff=target-now;
      if(diff<=0){
        el.d.textContent='0';el.h.textContent='00';el.m.textContent='00';el.s.textContent='00';
        el.done.classList.add('show');
        return;
      }
      const sec=Math.floor(diff/1000);
      const days=Math.floor(sec/86400);
      const hrs=Math.floor((sec%86400)/3600);
      const mins=Math.floor((sec%3600)/60);
      const s=sec%60;
      el.d.textContent=days;
      el.h.textContent=pad(hrs);
      el.m.textContent=pad(mins);
      el.s.textContent=pad(s);
    }
    tick();
    setInterval(tick,1000);

    // Zpět na předchozí stránku
    const backBtn = document.getElementById('goBack');
    if (backBtn) backBtn.addEventListener('click', () => {
      if (history.length > 1) history.back();
      else window.location.href = '/';
    });

    // Volitelně umožni přepsat cílový FB příspěvek pomocí ?fb=URL
    const fbParam = qs.get('fb');
    if (fbParam) {
      try { const u = new URL(fbParam); const go = document.getElementById('goFB'); if (go) go.href = u.href; }
      catch(e){ /* ignoruj neplatné URL */ }
    }

    // Zpět tlačítko
    const backBtn=document.getElementById('goBack');
    if(backBtn){backBtn.addEventListener('click',()=>{if(history.length>1)history.back();else window.location.href='/';});}

    // Volitelný přepis FB odkazu parametrem ?fb=...
    const fbParam=qs.get('fb');
    if(fbParam){
      try{const u=new URL(fbParam);document.getElementById('goFB').href=u.href;}catch(e){/* ignore */}
    }
  </script>
</body>
</html>
